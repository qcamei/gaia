webpackJsonp([1],{"+2zA":function(e,t){},"/FF+":function(e,t,a){"use strict";var n,s=a("a3Yh"),r=a.n(s),i=a("4YfN"),o=a.n(i),l=a("aA9S"),c=a.n(l),p=a("HQCK"),d=a("UOq2");t.a=a.i(p.a)((n={},r()(n,d.a,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{templatesInfo:t.payload.data.data})}return e}),r()(n,d.d,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{moduleDetail:t.payload.data.data})}return c()({},e,{textData:"没有获取到此模块的文字信息,请点击重试"})}),r()(n,d.b,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{moduleData:t.payload.data.data,moduleOldData:t.payload.data.data})}return c()({},e,{textData:"没有获取到此模块的数据信息,请点击重试"})}),r()(n,d.e,function(e,t){if(!t.error){return c()({},e,{moduleDetail:o()({},e.moduleDetail,{txtData:t.payload?t.payload:""})})}return e}),r()(n,d.f,function(e,t){if(1===t.globalStyle){return c()({},e,{moduleData:t.payload})}if(!t.error){return c()({},e,{moduleData:o()({},e.moduleData,{chartData:t.payload?t.payload:""}),moduleOldData:o()({},e.moduleOldData)})}return e}),r()(n,d.k,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{checkChart:t.payload.data.message})}return c()({},e,{checkChart:"没有获取到数据"})}),n),{templatesInfo:[]})},"/cg+":function(e,t,a){"use strict";var n=a("Yarq"),s=a.n(n),r=a("AA3o"),i=a.n(r),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("BNWl"),y=(a.n(f),a("pq2k")),v=(a.n(y),a("R/7I")),E=a.n(v),g=a("8FaN"),D=a.n(g),I=a("4UBr"),_=(a.n(I),a("tKH1")),M=(a.n(_),a("bhly")),b=(a.n(M),a("H9lX")),k=a.n(b),A=a("dLdd"),S=(a.n(A),a("Om99")),T=(D.a.Item,function(e){function t(){var e,a,n,r;i()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(l))),n.state={loading:!1},r=a,p()(n,r)}return u()(t,e),l()(t,[{key:"handleOk",value:function(){}},{key:"render",value:function(){return h.a.createElement("div",{className:k.a.addModule},h.a.createElement(E.a,{visible:this.props.visiableAddNew,title:"新增模块",onOk:this.handleOk,onCancel:this.props.hideModal,footer:null},h.a.createElement(S.a,{addNewModule:this.props.addNewModule})))}}]),t}(h.a.Component));t.a=T},"1eob":function(e,t){},"3JL9":function(e,t){},"6+V5":function(e,t,a){"use strict";var n,s=a("a3Yh"),r=a.n(s),i=a("aA9S"),o=a.n(i),l=a("HQCK"),c=a("UOq2");t.a=a.i(l.a)((n={},r()(n,c.m,function(e,t){var a=++e.isFetching;return o()({},e,{isFetching:a})}),r()(n,c.n,function(e,t){var a=0===e.isFetching?0:--e.isFetching;return o()({},e,{isFetching:a,templateID:4})}),r()(n,c.o,function(e,t){return o()({},e,{errorDetail:t.payload})}),r()(n,c.l,function(e,t){return o()({},e,{errorDetail:t.payload})}),n),{isFetching:0,errorDetail:""})},AWYw:function(e,t){},BBkz:function(e,t){},BCOr:function(e,t,a){"use strict";var n,s=a("a3Yh"),r=a.n(s),i=a("rVsN"),o=a.n(i),l=a("BMa3"),c=a.n(l),p=a("UOq2"),d=a("IcnI");console.log("当前的环境配置是","生产环境"),c.a.defaults.globalStyle=0,c.a.defaults.baseURL="/autoreport",c.a.interceptors.request.use(function(e){return d.a.dispatch({type:"REQUEST_BEGIN"}),e},function(e){return o.a.reject(e)}),c.a.interceptors.response.use(function(e){return d.a.dispatch({type:"REQUEST_COMPLETE"}),e.data.success||d.a.dispatch({type:"ERROR_OCCUR",payload:"数据获取失败!"}),c.a.defaults.globalStyle=e.config.params.style,e},function(e){e.response.data;d.a.dispatch({type:"REQUEST_COMPLETE"}),d.a.dispatch({type:"ERROR_OCCUR",payload:"请求发生了错误!"})}),t.a=(n={},r()(n,p.a,function(e){return{type:p.a,payload:c.a.get("/template/config",{params:e})}}),r()(n,p.b,function(e){return{type:p.b,payload:c.a.get("/select",{params:e})}}),r()(n,p.c,function(e,t){return{type:p.c,payload:c.a.post("/template/update?hosId="+t,{params:e})}}),r()(n,p.d,function(e){return{type:p.d,payload:c.a.get("/module",{params:e})}}),r()(n,p.e,function(e){return{type:p.e,payload:e}}),r()(n,p.f,function(e){return{type:p.f,globalStyle:c.a.defaults.globalStyle,payload:e}}),r()(n,p.g,function(e){return{type:p.g,payload:c.a.post("/module/update",e)}}),r()(n,p.h,function(e){return{type:p.h,payload:c.a.get("/updateChart",{params:e})}}),r()(n,p.i,function(e){return{type:p.i,payload:c.a.post("/module/insert",e)}}),r()(n,p.j,function(e){return{type:p.j,payload:c.a.get("/deleteChart",{params:e})}}),r()(n,p.k,function(e){return{type:p.k,payload:c.a.get("/checkChart",{params:e})}}),n)},BdWZ:function(e,t,a){"use strict";var n=a("a3Yh"),s=a.n(n),r=a("UOq2");t.a=s()({},r.l,function(e){return{type:r.l}})},BguP:function(e,t){},ChGC:function(e,t,a){"use strict";var n=a("i3WN"),s=a("/FF+"),r=a("6+V5");t.a=a.i(n.d)({templates:s.a,common:r.a})},D2IU:function(e,t){},H9lX:function(e,t){e.exports={tab_content:"_-0xKWrto_jwFqh4PwF3uX",align_center:"uG5NrP6fv3DacYMTo94I7",switch_container:"_1JMswzPnqkGvp_My374r9F",edit:"_33icvMaKMV_6KEbpuaWSqp",edit_body:"_1b2Pu6BiB4nxLkTWYwxq6o",sync_circle:"_3T5EZ4OMKPFjj6dhmB68bW",actions:"_3FnZZZQB8X_o11-sc1hu3E",addModule:"_2hPIkU4N9B7MbCQQjGb5qW",marginTop20:"aLRXZhRIoxxU2wKpv2DMC",text_title:"_2veRev2dl5y9_0yrkeqlCU",text_left:"_3OvQihbRznSaHEo0aLCpb8"}},IVYL:function(e,t){},IcnI:function(e,t,a){"use strict";var n=a("i3WN"),s=a("hMy5"),r=a.n(s),i=a("ChGC"),o={};t.a=a.i(n.b)(i.a,o,a.i(n.c)(r.a))},JaHG:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){var t=parseInt(e);return!isNaN(t)}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Vp57"),s=a.n(n),r=a("/4rR"),i=a.n(r),o=a("3vYS"),l=a("6qjO"),c=a("eqvY"),p=a("IcnI"),d=a("ZBI+"),u=a.n(d),m=u()();i.a.render(s.a.createElement(l.a,{store:p.a},s.a.createElement(o.a,{history:m},s.a.createElement("div",{className:"atv"},s.a.createElement(o.b,{path:"/",component:c.a})))),document.getElementById("app"))},OFuJ:function(e,t){},Om99:function(e,t,a){"use strict";function n(e){return f()(e).some(function(t){return e[t]})}var s=a("Yarq"),r=a.n(s),i=a("AA3o"),o=a.n(i),l=a("xSur"),c=a.n(l),p=a("UzKs"),d=a.n(p),u=a("Y7Ml"),m=a.n(u),h=a("ZLEe"),f=a.n(h),y=a("Vp57"),v=a.n(y),E=a("pq2k"),g=a.n(E),D=a("8FaN"),I=a.n(D),_=a("4UBr"),M=a.n(_),b=a("tKH1"),k=a.n(b),A=a("bhly"),S=a.n(A),T=I.a.Item,C=function(e){function t(){var e,a,n,s;o()(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return a=n=d()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(l))),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),n.props.addNewModule(t).then(function(e){if(!e.payload.data.success)return void S.a.error({message:payload.data.message});n.props.form.resetFields(),n.props.form.validateFields(),S.a.success({message:"新增模块成功！"})}).catch(function(e){}))})},s=a,d()(n,s)}return m()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldsError,s=e.getFieldError,r=e.isFieldTouched,i=(e.resetFields,r("id")&&s("id")),o=r("name")&&s("name");return v.a.createElement(I.a,{layout:"vertical",onSubmit:this.handleSubmit},v.a.createElement(T,{validateStatus:i?"error":"",help:i||""},t("id",{rules:[{required:!0,message:"请输入模块ID，ID必须为数字",pattern:/^(\d)*$/}]})(v.a.createElement(k.a,{prefix:v.a.createElement(M.a,{type:"edit",style:{fontSize:13}}),placeholder:"模块ID"}))),v.a.createElement(T,{validateStatus:o?"error":"",help:o||""},t("name",{rules:[{required:!0,message:"请输入模块名称"}]})(v.a.createElement(k.a,{prefix:v.a.createElement(M.a,{type:"edit",style:{fontSize:13}}),placeholder:"模块名称"}))),v.a.createElement(T,null,t("description",{rules:[{required:!1,message:"请输入文字描述"}]})(v.a.createElement(k.a,{prefix:v.a.createElement(M.a,{type:"edit",style:{fontSize:13}}),type:"textarea",placeholder:"模块文字描述"}))),v.a.createElement(T,null,t("remark",{rules:[{required:!1,message:"请输入备注信息"}]})(v.a.createElement(k.a,{prefix:v.a.createElement(M.a,{type:"edit",style:{fontSize:13}}),placeholder:"备注信息"}))),v.a.createElement(T,null,v.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:n(a())},"提交")))}}]),t}(v.a.Component);t.a=I.a.create()(C)},P4Zp:function(e,t){},Rj6T:function(e,t,a){"use strict";var n=a("Yarq"),s=a.n(n),r=a("AA3o"),i=a.n(r),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("6qjO"),y=a("EhB9"),v=a.n(y),E=a("UraS"),g=a.n(E),D=a("glqt"),I=a.n(D),_=a("zNjO"),M=(a.n(_),a("BdWZ")),b=function(e){function t(e){i()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.state={errorDetail:""},a}return u()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.common.errorDetail;t&&(I.a.error(t),this.props.CLEAR_ERRORS())}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.common,t=e.isFetching,a=this.state&&this.state.errorDetail;return a&&console.log("errorDetail",a),h.a.createElement("div",{className:"globalBase"},t>0?h.a.createElement(v.a,{type:"spokes",color:"red",height:40,width:40,className:g.a.loading}):"")}}]),t}(h.a.Component),k=function(e){return{common:e.common}},A=M.a;t.a=a.i(f.b)(k,A)(b)},U2t0:function(e,t,a){"use strict";var n=a("Yarq"),s=a.n(n),r=a("AA3o"),i=a.n(r),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Nq/R"),h=(a.n(m),a("Vp57")),f=a.n(h),y=a("BNWl"),v=a.n(y),E=a("pq2k"),g=a.n(E),D=a("LffS"),I=a.n(D),_=a("bhly"),M=a.n(_),b=a("4UBr"),k=(a.n(b),a("H9lX")),A=a.n(k),S=a("dLdd"),T=a.n(S),C=a.i(m.SortableElement)(function(e){var t=e.value,a=e.active,n=e.switchDo;return f.a.createElement("li",{style:{position:"relative",width:"100%",display:"block",padding:16,backgroundColor:"#FFF",borderBottom:"1px solid #EFEFEF",boxSizing:"border-box",WebkitUserSelect:"none"}},t,f.a.createElement("div",{className:A.a.switch_container},f.a.createElement(I.a,{checked:a,onChange:n})))}),N=a.i(m.SortableContainer)(function(e){var t=e.items,a=e.switchDo,n=e.that;return f.a.createElement("ul",{style:{width:"100%",maxHeight:"calc(100vh - 128px)",margin:"0 auto",marginBottom:"10px",overflow:"auto",backgroundColor:"#f3f3f3",border:"1px solid #EFEFEF",borderRadius:3}},t.map(function(e,t){var s=e.name,r=e.active,i=e.id;return f.a.createElement(C,{key:"item-"+t,index:t,value:s,active:r,switchDo:a.bind(n,{active:r,id:i})})}))}),x=function(e){function t(){var e,n,r,o;i()(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return n=r=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r.state={items:[],loading:!1},r.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,s=r.state.items;if(r.props.selectedModule(s[t]),t===n)return void console.log("顺序没有发生变化");r.setState({items:a.i(m.arrayMove)(s,t,n)},function(){r.props.templateModifyTrue()})},o=n,p()(r,o)}return u()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){e.templateID!==this.state.templateID&&this.setState({items:this.props.curModules,templateID:this.props.templateID})}},{key:"shouldComponentUpdate",value:function(e,t){return e.templateID!==this.state.templateID||this.state!==t}},{key:"componentDidMount",value:function(){0===this.state.items.length&&this.setState({items:this.props.curModules,templateID:this.props.templateID})}},{key:"switch",value:function(e,t){var a=this,n=e.active,s=e.id,r=T.a.cloneDeep(this.state.items),i=T.a.find(r,{id:s,active:n});i?(i.active=t,this.setState({items:r},function(){a.props.templateModifyTrue()})):console.log("没有找到module")}},{key:"syncModules",value:function(){var e=this;if(0===this.state.items.length||!this.props.templateModify)return void M.a.warning({message:"没有检测到更改！"});this.setState({loading:!0}),this.props.sync({templateID:this.state.templateID,modules:this.state.items,templateName:this.props.templateName},this.props.HospitalId).then(function(t){t.payload.data.success?(e.setState({loading:!1}),e.props.templateModifyFalse(),M.a.success({message:"同步模块顺序&开关状态成功！"}),e.props.reFetchData()):(e.setState({loading:!1}),M.a.error({message:"同步失败！",description:"服务当前不可用"}))})}},{key:"render",value:function(){return f.a.createElement("div",{className:A.a.sort_list},f.a.createElement(N,{items:this.state.items,onSortEnd:this.onSortEnd,that:this,switchDo:this.switch,helperClass:"activedList"}),f.a.createElement("div",{className:A.a.align_center},f.a.createElement(g.a,{type:"primary",icon:"sync",onClick:this.syncModules.bind(this),loading:this.state.loading},"同步模块顺序 & 开关状态")))}}]),t}(f.a.Component);t.a=x,x.propTypes={curModules:v.a.array}},UOq2:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"m",function(){return s}),a.d(t,"n",function(){return r}),a.d(t,"o",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"l",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return p}),a.d(t,"g",function(){return d}),a.d(t,"i",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"h",function(){return h}),a.d(t,"f",function(){return f}),a.d(t,"j",function(){return y}),a.d(t,"k",function(){return v});var n="GET_TEMPLATES",s="REQUEST_BEGIN",r="REQUEST_COMPLETE",i="ERROR_OCCUR",o="SYNC_MODULES_IN_TEMPLATES",l="CLEAR_ERRORS",c="GET_MODULE_DETAIL",p="SAVE_TEXTAREA",d="SYNC_TEXTAREA",u="ADD_NEW_MODULE",m="GET_MODULE_DATA",h="SYNC_DATAAREA",f="SAVE_DATAAREA",y="CLEAR_DAYA",v="CHECK_CHART"},UraS:function(e,t){e.exports={loading:"_2qlCpo31oA7m63zX0FCPV_"}},XFyo:function(e,t){},"Yq+E":function(e,t){e.exports={container:"_2vEaSEppDHCKse6wPryRHA"}},a4tX:function(e,t){},eqvY:function(e,t,a){"use strict";var n=a("Vp57"),s=a.n(n),r=a("3vYS"),i=a("i3dJ"),o=a("zYeL"),l=a("Yq+E"),c=a.n(l),p=a("Rj6T");t.a=function(e){e.match;return s.a.createElement("div",null,s.a.createElement("div",{className:c.a.container},s.a.createElement("div",{className:"left"},s.a.createElement("aside",{id:"aside",className:"aside"},s.a.createElement("div",{className:"logo"},"运营平台"),s.a.createElement("ul",{className:"menu",id:"asidemenu"}))),s.a.createElement("div",{className:"right"},s.a.createElement(p.a,null),s.a.createElement(r.c,null,s.a.createElement(r.d,null,s.a.createElement(r.b,{path:"/hospital/:id",exact:!0,component:o.a}),s.a.createElement(r.b,{path:"/",component:i.a}))))))}},i3dJ:function(e,t,a){"use strict";var n=a("Vp57"),s=a.n(n);t.a=function(){return s.a.createElement("div",null,"没有对应的页面：404 ERROR!")}},naZi:function(e,t){},qca9:function(e,t){},tWyK:function(e,t,a){"use strict";var n=a("3cXf"),s=a.n(n),r=a("ZLEe"),i=a.n(r),o=a("Yarq"),l=a.n(o),c=a("AA3o"),p=a.n(c),d=a("xSur"),u=a.n(d),m=a("UzKs"),h=a.n(m),f=a("Y7Ml"),y=a.n(f),v=a("Vp57"),E=a.n(v),g=a("H9lX"),D=a.n(g),I=a("dLdd"),_=(a.n(I),a("4UBr")),M=a.n(_),b=a("kcZj"),k=a.n(b),A=a("jTsb"),S=a.n(A),T=a("tKH1"),C=a.n(T),N=a("pq2k"),x=a.n(N),O=a("8FaN"),R=a.n(O),F=a("aUFn"),w=a.n(F),U=a("bhly"),q=a.n(U),H=(R.a.Item,C.a.TextArea),L=function(e){function t(){var e,a,n,s;p()(this,t);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return a=n=h()(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(i))),n.state={loading:!1,style:n.props.templateID<4?0:1,dataValue:""},s=a,h()(n,s)}return y()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.module;this.props.getModuleDetail({hosId:this.props.HospitalId,pageId:e.id,style:this.state.style}),this.props.getModuleData({hosId:this.props.HospitalId,page:e.id,style:this.state.style})}},{key:"componentWillReceiveProps",value:function(e){if(parseInt(this.props.module.id)!==parseInt(e.module.id)){console.log("更新module id");var t=e.module;this.props.getModuleDetail({hosId:this.props.HospitalId,pageId:t.id,style:this.state.style}),this.props.getModuleData({hosId:this.props.HospitalId,page:t.id,style:this.state.style})}}},{key:"onDataChange",value:function(e,t,a){var n=this;try{var s=JSON.parse(e);this.setState({error:!1},function(e){n.props.saveDataArea(s),n.props.templateModifyTrue()})}catch(t){this.setState({error:!0},function(t){n.props.saveDataArea(e),n.props.templateModifyTrue(),q.a.error({message:"数据结构有误,请确认"})})}}},{key:"updateTextarea",value:function(e){var t=e.target.value;this.props.saveTextArea(t)}},{key:"syncTextArea",value:function(){var e=this;this.setState({loading:!0});var t=this.props.module;if(this.props.moduleDetail.txtData){this.props.syncTextArea({hosId:this.props.HospitalId,pageId:t.id,sections:this.props.moduleDetail.txtData}).then(function(t){t.payload?(e.setState({loading:!1}),e.props.templateModifyFalse(),q.a.success({message:"同步模块文字成功！"})):(e.setState({loading:!1}),q.a.error({message:"同步失败！",description:"服务当前不可用"}))})}}},{key:"syncDataArea",value:function(){var e=this;if(this.state.error)return q.a.error({message:"数据结构有误,请确认"}),!1;var t=this.props.module,a=1===this.state.style?this.props.moduleData:this.props.moduleData.chartData,n=1===this.state.style?this.props.moduleOldData:this.props.moduleOldData.chartData;if(this.state.formatError=!1,n instanceof Array){if(!a instanceof Array)return q.a.error({message:"数据格式应该是数组"}),!1;n.forEach(function(t,n){if(t.constructor===Object&&(console.log(i()(t).join()===i()(a[n]).join()),i()(t).join()!==i()(a[n]).join()))return e.state.formatError=!0,q.a.error({message:"新数据的key值与原数据key值不符"}),!1})}if(n&&n.constructor===Object){if(a.constructor!==Object)return q.a.error({message:"数据格式应该是Object"}),!1;if(i()(n).join()!==i()(a).join())return this.state.formatError=!0,q.a.error({message:"新数据的key值与原数据key值不符"}),!1}if(this.state.formatError)return!1;this.setState({loading:!0});var r=s()(a);this.props.syncDataArea({hosId:this.props.HospitalId,page:t.id,style:this.state.style,chart:r}).then(function(t){if(t.payload){var a=e.props.module;e.setState({loading:!1}),e.props.templateModifyFalse(),q.a.success({message:"同步模块数据成功！"}),e.props.checkChart(),e.props.getModuleData({hosId:e.props.HospitalId,page:a.id,style:e.state.style})}else e.setState({loading:!1}),q.a.error({message:"同步失败！",description:"服务当前不可用"})})}},{key:"render",value:function(){var e=this.props.moduleDetail?this.props.moduleDetail.txtData:"这个模块还没有文本数据！",t=this.props.moduleDetail?this.props.moduleDetail.pageNum:"",a=this.props.moduleDetail?this.props.moduleDetail.chapterNum:"",n=this.props.moduleData?this.props.moduleData:{},r=void 0,i=void 0;4===parseInt(this.props.templateID)?(i=!0,r=n?n.constructor===String?n:s()(n,null,2):s()({})):(i=!!n.chartData,r=n.chartData?n.chartData.constructor===String?n.chartData:s()(n.chartData,null,2):s()({}));var o={disableLayerHinting:!0,disableMonospaceOptimizations:!0};return E.a.createElement("div",null,E.a.createElement(S.a,{message:"当前编辑的模块名是"+this.props.module.name+"，页码为"+t+",章节码为"+a,type:"info",showIcon:!0}),E.a.createElement(k.a,{mode:"horizontal",selectedKeys:["edit"]},E.a.createElement(k.a.Item,{key:"edit"},E.a.createElement(M.a,{type:"mail"}),"编辑模块"),E.a.createElement(k.a.Item,{key:"preview"},E.a.createElement("a",{href:4==this.props.templateID?"http://121.42.252.26:3000/horizontal/"+this.props.HospitalId+"?template="+this.props.templateID+"&style=1&module="+parseInt(this.props.module.id):"http://121.42.252.26:3000/"+this.props.HospitalId+"?template="+this.props.templateID+"&style=0&module="+parseInt(this.props.module.id),target:"_blank"},E.a.createElement(M.a,{type:"mail"}),"预览当前模块web版本"))),E.a.createElement("div",{className:D.a.edit_body},i?E.a.createElement("div",null,E.a.createElement("div",{className:D.a.text_title},"编辑模块数据"),E.a.createElement("div",{className:D.a.text_left},E.a.createElement(w.a,{width:"800",height:"400",language:"json",theme:"vs",options:o,onChange:this.onDataChange.bind(this),value:r})),E.a.createElement("div",{className:D.a.sync_circle},E.a.createElement(x.a,{type:"primary",icon:"sync",loading:this.state.loading,onClick:this.syncDataArea.bind(this)},"同步模块数据"))):null,this.props.templateID<4?E.a.createElement("div",null,E.a.createElement("div",{className:D.a.text_title},"编辑模块文字"),E.a.createElement(H,{placeholder:"正在加载文本信息...",value:e,rows:8,onChange:this.updateTextarea.bind(this)}),E.a.createElement("div",{className:D.a.sync_circle},E.a.createElement(x.a,{type:"primary",icon:"sync",onClick:this.syncTextArea.bind(this),loading:this.state.loading},"同步模块文字"))):null))}}]),t}(E.a.Component);t.a=L},w0dx:function(e,t,a){"use strict";var n=a("Yarq"),s=a.n(n),r=a("AA3o"),i=a.n(r),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("OtPS"),y=a.n(f),v=a("nPfA"),E=(a.n(v),a("H9lX")),g=a.n(E),D=a("R/7I"),I=a.n(D),_=a("4UBr"),M=a.n(_),b=a("pq2k"),k=a.n(b),A=a("bhly"),S=a.n(A),T=a("jTsb"),C=a.n(T),N=a("lQ53"),x=(a.n(N),a("RiOE")),O=(a.n(x),a("zNjO")),R=(a.n(O),a("FmU8")),F=(a.n(R),a("RMoS")),w=(a.n(F),a("q1Sz")),U=(a.n(w),a("4S3J")),q=(a.n(U),a("MYx0")),H=(a.n(q),a("4uc4")),L=(a.n(H),a("M09i")),K=(a.n(L),a("dLdd")),Y=a.n(K),j=a("glqt"),P=(a.n(j),a("U2t0")),B=a("JaHG"),z=a("tWyK"),W=a("/cg+"),V=y.a.TabPane,G=function(e){function t(){var e,a,n,r;i()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(l))),n.state={style:0,activeKey:"",templateModify:!1,selectedModule:"",visiableAddNew:!1},n.tabClick=function(e){parseInt(e)!==parseInt(n.state.activeKey)&&(n.state.templateModify?I.a.confirm({title:"请确认",content:"当前配置已经修改，你要丢弃当前修改吗？",okText:"是的",cancelText:"取消",onOk:n.confirmSHIFT.bind(n,e)}):n.confirmSHIFT(e))},r=a,p()(n,r)}return u()(t,e),l()(t,[{key:"exchangeModulePosition",value:function(e,t,a){var n=Y.a.find(this.props.templatesInfo.templates,{templateID:parseInt(e)});Y.a.cloneDeep(n)}},{key:"templateModifyTrue",value:function(){this.setState({templateModify:!0})}},{key:"templateModifyFalse",value:function(){this.setState({templateModify:!1})}},{key:"confirmSHIFT",value:function(e){var t=Y.a.find(this.props.templatesInfo,{templateID:parseInt(e)});t?(S.a.warning({message:"请注意！您即将配置"+t.templateName+"!"}),this.switchSure(e)):S.a.warning({message:"没有找到对应的模板,id为:"+e})}},{key:"switchSure",value:function(e){var t=this;parseInt(e)!==parseInt(this.state.activeKey)&&(this.setState({activeKey:e,selectedModule:""},function(){t.templateModifyFalse()}),this.setState({style:e<4?0:1}),this.props.CHECK_CHART({hosId:this.props.match.params.id,style:e<4?0:1}))}},{key:"showModal",value:function(){this.setState({visiableAddNew:!0})}},{key:"hideModal",value:function(){this.setState({visiableAddNew:!1})}},{key:"componentDidMount",value:function(){var e=this;this.props.GET_TEMPLATES({hosId:this.props.match.params.id}).then(function(){var t=parseInt(e.state.activeKey),n=0!==e.props.templatesInfo.length?e.props.templatesInfo[0].templateID:"",s="number"!=typeof t||isNaN(t)?parseInt(n):t;a.i(B.a)(n)&&e.setState({activeKey:s},function(){console.log("初始加载完毕的page为",s)}),e.checkChart()})}},{key:"curSelectModule",value:function(e){this.setState({selectedModule:e})}},{key:"exportPDF",value:function(){var e=this.state.activeKey,t=this.props.match.params.id;4==e&&window.open("http://121.42.252.26:3001/horizontal/"+t+"?template="+e+"&style=1","_blank"),1!=e&&2!=e&&3!=e||window.open("http://121.42.252.26:3001/"+t+"?template="+e+"&style=0","_blank")}},{key:"previewWeb",value:function(){var e=this.state.activeKey,t=this.props.match.params.id;4==e&&window.open("http://121.42.252.26:3000/horizontal/"+t+"?template="+e+"&style=1","_blank"),1!=e&&2!=e&&3!=e||window.open("http://121.42.252.26:3000/"+t+"?template="+e+"&style=0","_blank")}},{key:"clearDataOk",value:function(){var e=this;this.props.CLEAR_DAYA({hosId:this.props.match.params.id,style:this.state.style}).then(function(t){if(!t.payload)return S.a.error({message:"同步失败！",description:"服务当前不可用"}),!1;t.payload.data.success?(S.a.success({message:"清除数据成功"}),e.checkChart(),(e.state.selectedModule||{}).id&&e.props.GET_MODULE_DATA({hosId:e.props.match.params.id,page:e.state.selectedModule.id,style:e.state.style})):S.a.error({message:"同步失败！",description:"服务当前不可用"})})}},{key:"clearData",value:function(){I.a.confirm({title:"清除数据",content:"是否要清除当前医院所有修改的数据？清除后不可恢复",okText:"是的",cancelText:"取消",onOk:this.clearDataOk.bind(this)})}},{key:"checkChart",value:function(){this.props.CHECK_CHART({hosId:this.props.match.params.id,style:this.state.style})}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.templatesInfo,a=0!==t.length,n=t,s=Y.a.find(n,{templateID:parseInt(this.state.activeKey)});return h.a.createElement("div",null,h.a.createElement(C.a,{message:this.props.checkChart,type:"info",style:{marginTop:"20px"},showIcon:!0}),a&&h.a.createElement("div",{className:g.a.marginTop20},h.a.createElement("div",null,h.a.createElement(y.a,{onTabClick:this.tabClick.bind(this),activeKey:""+this.state.activeKey,size:"default",type:"card"},n&&n.map(function(e){return h.a.createElement(V,{tab:e.templateName,key:e.templateID})})))),h.a.createElement("div",{className:g.a.tab_content},h.a.createElement("div",{className:"modules_list"},h.a.createElement("div",null,s&&h.a.createElement(P.a,{sync:this.props.SYNC_MODULES_IN_TEMPLATES,templateID:this.state.activeKey,HospitalId:e,templateName:s.templateName,exchangeModulePosition:this.exchangeModulePosition,curModules:s.modules,templateModifyTrue:this.templateModifyTrue.bind(this),templateModifyFalse:this.templateModifyFalse.bind(this),templateModify:this.state.templateModify,selectedModule:this.curSelectModule.bind(this),reFetchData:this.componentDidMount.bind(this)}))),h.a.createElement("div",{className:"modules_content"},a&&!this.state.selectedModule&&h.a.createElement("div",{className:g.a.edit,style:{marginTop:100,marginBottom:100}},h.a.createElement(M.a,{type:"edit",style:{fontSize:100,color:"#e2e2e2"}}),h.a.createElement("div",null,"点击左侧模块，进行编辑操作")),this.state.selectedModule&&h.a.createElement(z.a,{module:this.state.selectedModule,templateID:this.state.activeKey,moduleDetail:this.props.moduleDetail,moduleData:this.props.moduleData,moduleOldData:this.props.moduleOldData,getModuleDetail:this.props.GET_MODULE_DETAIL,getModuleData:this.props.GET_MODULE_DATA,saveTextArea:this.props.SAVE_TEXTAREA,saveDataArea:this.props.SAVE_DATAAREA,syncTextArea:this.props.SYNC_TEXTAREA,syncDataArea:this.props.SYNC_DATAAREA,templateModifyTrue:this.templateModifyTrue.bind(this),templateModifyFalse:this.templateModifyFalse.bind(this),HospitalId:e,checkChart:this.checkChart.bind(this)}))),h.a.createElement("div",{className:g.a.actions},h.a.createElement(k.a,{type:"primary",icon:"file",onClick:this.clearData.bind(this)}," 清除改动数据 "),!isNaN(parseInt(this.state.activeKey))&&h.a.createElement(k.a,{type:"primary",icon:"file",onClick:this.exportPDF.bind(this)}," 导出PDF "),!isNaN(parseInt(this.state.activeKey))&&h.a.createElement(k.a,{type:"primary",icon:"file",onClick:this.previewWeb.bind(this)}," 预览网页 "),h.a.createElement(k.a,{type:"primary",icon:"plus",onClick:this.showModal.bind(this)}," 新增模块 "),h.a.createElement(W.a,{visiableAddNew:this.state.visiableAddNew,hideModal:this.hideModal.bind(this),addNewModule:this.props.ADD_NEW_MODULE})))}}]),t}(h.a.Component);t.a=G},zYeL:function(e,t,a){"use strict";var n=a("Vp57"),s=(a.n(n),a("BCOr")),r=a("6qjO"),i=a("w0dx"),o=function(e){return e.templates},l=s.a;console.log(l);var c=a.i(r.b)(o,l)(i.a);t.a=c}},["NHnr"]);