webpackJsonp([1],{"+2zA":function(e,t){},"/FF+":function(e,t,a){"use strict";var n,r=a("a3Yh"),i=a.n(r),s=a("4YfN"),o=a.n(s),l=a("aA9S"),c=a.n(l),p=a("HQCK"),d=a("UOq2");t.a=a.i(p.a)((n={},i()(n,d.a,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{templatesInfo:t.payload.data.data})}return e}),i()(n,d.d,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{moduleDetail:t.payload.data.data})}return c()({},e,{textData:"没有获取到此模块的文字信息,请点击重试"})}),i()(n,d.b,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{moduleData:t.payload.data.data,moduleOldData:t.payload.data.data})}return c()({},e,{textData:"没有获取到此模块的数据信息,请点击重试"})}),i()(n,d.e,function(e,t){if(!t.error){return c()({},e,{moduleDetail:o()({},e.moduleDetail,{txtData:t.payload?t.payload:""})})}return e}),i()(n,d.f,function(e,t){if(!t.error){return c()({},e,{moduleData:o()({},e.moduleData,{chartData:t.payload?t.payload:""}),moduleOldData:o()({},e.moduleOldData)})}return e}),i()(n,d.k,function(e,t){if(!t.error&&t.payload&&t.payload.data.success){return c()({},e,{checkChart:t.payload.data.message})}return c()({},e,{checkChart:"没有获取到数据"})}),n),{templatesInfo:[]})},"/cg+":function(e,t,a){"use strict";var n=a("Yarq"),r=a.n(n),i=a("AA3o"),s=a.n(i),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("BNWl"),y=(a.n(f),a("pq2k")),v=(a.n(y),a("R/7I")),E=a.n(v),g=a("8FaN"),D=a.n(g),_=a("4UBr"),M=(a.n(_),a("tKH1")),I=(a.n(M),a("bhly")),k=(a.n(I),a("H9lX")),A=a.n(k),b=a("dLdd"),S=(a.n(b),a("Om99")),T=(D.a.Item,function(e){function t(){var e,a,n,i;s()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(l))),n.state={loading:!1},i=a,p()(n,i)}return u()(t,e),l()(t,[{key:"handleOk",value:function(){}},{key:"render",value:function(){return h.a.createElement("div",{className:A.a.addModule},h.a.createElement(E.a,{visible:this.props.visiableAddNew,title:"新增模块",onOk:this.handleOk,onCancel:this.props.hideModal,footer:null},h.a.createElement(S.a,{addNewModule:this.props.addNewModule})))}}]),t}(h.a.Component));t.a=T},"1eob":function(e,t){},"3JL9":function(e,t){},"6+V5":function(e,t,a){"use strict";var n,r=a("a3Yh"),i=a.n(r),s=a("aA9S"),o=a.n(s),l=a("HQCK"),c=a("UOq2");t.a=a.i(l.a)((n={},i()(n,c.m,function(e,t){var a=++e.isFetching;return o()({},e,{isFetching:a})}),i()(n,c.n,function(e,t){var a=0===e.isFetching?0:--e.isFetching;return o()({},e,{isFetching:a})}),i()(n,c.o,function(e,t){return o()({},e,{errorDetail:t.payload})}),i()(n,c.l,function(e,t){return o()({},e,{errorDetail:t.payload})}),n),{isFetching:0,errorDetail:""})},AWYw:function(e,t){},BBkz:function(e,t){},BCOr:function(e,t,a){"use strict";var n,r=a("a3Yh"),i=a.n(r),s=a("rVsN"),o=a.n(s),l=a("BMa3"),c=a.n(l),p=a("UOq2"),d=a("IcnI");console.log("当前的环境配置是","生产环境"),c.a.defaults.baseURL="/autoreport",c.a.interceptors.request.use(function(e){return d.a.dispatch({type:"REQUEST_BEGIN"}),e},function(e){return o.a.reject(e)}),c.a.interceptors.response.use(function(e){return d.a.dispatch({type:"REQUEST_COMPLETE"}),e.data.success||d.a.dispatch({type:"ERROR_OCCUR",payload:"数据获取失败!"}),e},function(e){e.response.data;d.a.dispatch({type:"REQUEST_COMPLETE"}),d.a.dispatch({type:"ERROR_OCCUR",payload:"请求发生了错误!"})}),t.a=(n={},i()(n,p.a,function(e){return{type:p.a,payload:c.a.get("/template/config",{params:e})}}),i()(n,p.b,function(e){return{type:p.b,payload:c.a.get("/select",{params:e})}}),i()(n,p.c,function(e,t){return{type:p.c,payload:c.a.post("/template/update?hosId="+t,{params:e})}}),i()(n,p.d,function(e){return{type:p.d,payload:c.a.get("/module",{params:e})}}),i()(n,p.e,function(e){return{type:p.e,payload:e}}),i()(n,p.f,function(e){return{type:p.f,payload:e}}),i()(n,p.g,function(e){return{type:p.g,payload:c.a.post("/module/update",e)}}),i()(n,p.h,function(e){return{type:p.h,payload:c.a.get("/updateChart",{params:e})}}),i()(n,p.i,function(e){return{type:p.i,payload:c.a.post("/module/insert",e)}}),i()(n,p.j,function(e){return{type:p.j,payload:c.a.get("/deleteChart",{params:e})}}),i()(n,p.k,function(e){return{type:p.k,payload:c.a.get("/checkChart",{params:e})}}),n)},BdWZ:function(e,t,a){"use strict";var n=a("a3Yh"),r=a.n(n),i=a("UOq2");t.a=r()({},i.l,function(e){return{type:i.l}})},BguP:function(e,t){},ChGC:function(e,t,a){"use strict";var n=a("i3WN"),r=a("/FF+"),i=a("6+V5");t.a=a.i(n.d)({templates:r.a,common:i.a})},D2IU:function(e,t){},H9lX:function(e,t){e.exports={tab_content:"_-0xKWrto_jwFqh4PwF3uX",align_center:"uG5NrP6fv3DacYMTo94I7",switch_container:"_1JMswzPnqkGvp_My374r9F",edit:"_33icvMaKMV_6KEbpuaWSqp",edit_body:"_1b2Pu6BiB4nxLkTWYwxq6o",sync_circle:"_3T5EZ4OMKPFjj6dhmB68bW",actions:"_3FnZZZQB8X_o11-sc1hu3E",addModule:"_2hPIkU4N9B7MbCQQjGb5qW",marginTop20:"aLRXZhRIoxxU2wKpv2DMC",text_title:"_2veRev2dl5y9_0yrkeqlCU",text_left:"_3OvQihbRznSaHEo0aLCpb8"}},IVYL:function(e,t){},IcnI:function(e,t,a){"use strict";var n=a("i3WN"),r=a("hMy5"),i=a.n(r),s=a("ChGC"),o={};t.a=a.i(n.b)(s.a,o,a.i(n.c)(i.a))},JaHG:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(e){var t=parseInt(e);return!isNaN(t)}},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Vp57"),r=a.n(n),i=a("/4rR"),s=a.n(i),o=a("3vYS"),l=a("6qjO"),c=a("eqvY"),p=a("IcnI"),d=a("ZBI+"),u=a.n(d),m=u()();s.a.render(r.a.createElement(l.a,{store:p.a},r.a.createElement(o.a,{history:m},r.a.createElement("div",{className:"atv"},r.a.createElement(o.b,{path:"/",component:c.a})))),document.getElementById("app"))},OFuJ:function(e,t){},Om99:function(e,t,a){"use strict";function n(e){return f()(e).some(function(t){return e[t]})}var r=a("Yarq"),i=a.n(r),s=a("AA3o"),o=a.n(s),l=a("xSur"),c=a.n(l),p=a("UzKs"),d=a.n(p),u=a("Y7Ml"),m=a.n(u),h=a("ZLEe"),f=a.n(h),y=a("Vp57"),v=a.n(y),E=a("pq2k"),g=a.n(E),D=a("8FaN"),_=a.n(D),M=a("4UBr"),I=a.n(M),k=a("tKH1"),A=a.n(k),b=a("bhly"),S=a.n(b),T=_.a.Item,N=function(e){function t(){var e,a,n,r;o()(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(l))),n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),n.props.addNewModule(t).then(function(e){if(!e.payload.data.success)return void S.a.error({message:payload.data.message});n.props.form.resetFields(),n.props.form.validateFields(),S.a.success({message:"新增模块成功！"})}).catch(function(e){}))})},r=a,d()(n,r)}return m()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,a=e.getFieldsError,r=e.getFieldError,i=e.isFieldTouched,s=(e.resetFields,i("id")&&r("id")),o=i("name")&&r("name");return v.a.createElement(_.a,{layout:"vertical",onSubmit:this.handleSubmit},v.a.createElement(T,{validateStatus:s?"error":"",help:s||""},t("id",{rules:[{required:!0,message:"请输入模块ID，ID必须为数字",pattern:/^(\d)*$/}]})(v.a.createElement(A.a,{prefix:v.a.createElement(I.a,{type:"edit",style:{fontSize:13}}),placeholder:"模块ID"}))),v.a.createElement(T,{validateStatus:o?"error":"",help:o||""},t("name",{rules:[{required:!0,message:"请输入模块名称"}]})(v.a.createElement(A.a,{prefix:v.a.createElement(I.a,{type:"edit",style:{fontSize:13}}),placeholder:"模块名称"}))),v.a.createElement(T,null,t("description",{rules:[{required:!1,message:"请输入文字描述"}]})(v.a.createElement(A.a,{prefix:v.a.createElement(I.a,{type:"edit",style:{fontSize:13}}),type:"textarea",placeholder:"模块文字描述"}))),v.a.createElement(T,null,t("remark",{rules:[{required:!1,message:"请输入备注信息"}]})(v.a.createElement(A.a,{prefix:v.a.createElement(I.a,{type:"edit",style:{fontSize:13}}),placeholder:"备注信息"}))),v.a.createElement(T,null,v.a.createElement(g.a,{type:"primary",htmlType:"submit",disabled:n(a())},"提交")))}}]),t}(v.a.Component);t.a=_.a.create()(N)},P4Zp:function(e,t){},Rj6T:function(e,t,a){"use strict";var n=a("Yarq"),r=a.n(n),i=a("AA3o"),s=a.n(i),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("6qjO"),y=a("EhB9"),v=a.n(y),E=a("UraS"),g=a.n(E),D=a("glqt"),_=a.n(D),M=a("zNjO"),I=(a.n(M),a("BdWZ")),k=function(e){function t(e){s()(this,t);var a=p()(this,(t.__proto__||r()(t)).call(this,e));return a.state={errorDetail:""},a}return u()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.common.errorDetail;t&&(_.a.error(t),this.props.CLEAR_ERRORS())}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.common,t=e.isFetching,a=this.state&&this.state.errorDetail;return a&&console.log("errorDetail",a),h.a.createElement("div",{className:"globalBase"},t>0?h.a.createElement(v.a,{type:"spokes",color:"red",height:40,width:40,className:g.a.loading}):"")}}]),t}(h.a.Component),A=function(e){return{common:e.common}},b=I.a;t.a=a.i(f.b)(A,b)(k)},U2t0:function(e,t,a){"use strict";var n=a("Yarq"),r=a.n(n),i=a("AA3o"),s=a.n(i),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Nq/R"),h=(a.n(m),a("Vp57")),f=a.n(h),y=a("BNWl"),v=a.n(y),E=a("pq2k"),g=a.n(E),D=a("LffS"),_=a.n(D),M=a("bhly"),I=a.n(M),k=a("4UBr"),A=(a.n(k),a("H9lX")),b=a.n(A),S=a("dLdd"),T=a.n(S),N=a.i(m.SortableElement)(function(e){var t=e.value,a=e.active,n=e.switchDo;return f.a.createElement("li",{style:{position:"relative",width:"100%",display:"block",padding:16,backgroundColor:"#FFF",borderBottom:"1px solid #EFEFEF",boxSizing:"border-box",WebkitUserSelect:"none"}},t,f.a.createElement("div",{className:b.a.switch_container},f.a.createElement(_.a,{checked:a,onChange:n})))}),C=a.i(m.SortableContainer)(function(e){var t=e.items,a=e.switchDo,n=e.that;return f.a.createElement("ul",{style:{width:"100%",maxHeight:"calc(100vh - 128px)",margin:"0 auto",marginBottom:"10px",overflow:"auto",backgroundColor:"#f3f3f3",border:"1px solid #EFEFEF",borderRadius:3}},t.map(function(e,t){var r=e.name,i=e.active,s=e.id;return f.a.createElement(N,{key:"item-"+t,index:t,value:r,active:i,switchDo:a.bind(n,{active:i,id:s})})}))}),x=function(e){function t(){var e,n,i,o;s()(this,t);for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];return n=i=p()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(c))),i.state={items:[],loading:!1},i.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,r=i.state.items;if(i.props.selectedModule(r[t]),t===n)return void console.log("顺序没有发生变化");i.setState({items:a.i(m.arrayMove)(r,t,n)},function(){i.props.templateModifyTrue()})},o=n,p()(i,o)}return u()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){e.templateID!==this.state.templateID&&this.setState({items:this.props.curModules,templateID:this.props.templateID})}},{key:"shouldComponentUpdate",value:function(e,t){return e.templateID!==this.state.templateID||this.state!==t}},{key:"componentDidMount",value:function(){0===this.state.items.length&&this.setState({items:this.props.curModules,templateID:this.props.templateID})}},{key:"switch",value:function(e,t){var a=this,n=e.active,r=e.id,i=T.a.cloneDeep(this.state.items),s=T.a.find(i,{id:r,active:n});s?(s.active=t,this.setState({items:i},function(){a.props.templateModifyTrue()})):console.log("没有找到module")}},{key:"syncModules",value:function(){var e=this;if(0===this.state.items.length||!this.props.templateModify)return void I.a.warning({message:"没有检测到更改！"});this.setState({loading:!0}),this.props.sync({templateID:this.state.templateID,modules:this.state.items,templateName:this.props.templateName},this.props.HospitalId).then(function(t){t.payload.data.success?(e.setState({loading:!1}),e.props.templateModifyFalse(),I.a.success({message:"同步模块顺序&开关状态成功！"}),e.props.reFetchData()):(e.setState({loading:!1}),I.a.error({message:"同步失败！",description:"服务当前不可用"}))})}},{key:"render",value:function(){return f.a.createElement("div",{className:b.a.sort_list},f.a.createElement(C,{items:this.state.items,onSortEnd:this.onSortEnd,that:this,switchDo:this.switch,helperClass:"activedList"}),f.a.createElement("div",{className:b.a.align_center},f.a.createElement(g.a,{type:"primary",icon:"sync",onClick:this.syncModules.bind(this),loading:this.state.loading},"同步模块顺序 & 开关状态")))}}]),t}(f.a.Component);t.a=x,x.propTypes={curModules:v.a.array}},UOq2:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"m",function(){return r}),a.d(t,"n",function(){return i}),a.d(t,"o",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"l",function(){return l}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return p}),a.d(t,"g",function(){return d}),a.d(t,"i",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"h",function(){return h}),a.d(t,"f",function(){return f}),a.d(t,"j",function(){return y}),a.d(t,"k",function(){return v});var n="GET_TEMPLATES",r="REQUEST_BEGIN",i="REQUEST_COMPLETE",s="ERROR_OCCUR",o="SYNC_MODULES_IN_TEMPLATES",l="CLEAR_ERRORS",c="GET_MODULE_DETAIL",p="SAVE_TEXTAREA",d="SYNC_TEXTAREA",u="ADD_NEW_MODULE",m="GET_MODULE_DATA",h="SYNC_DATAAREA",f="SAVE_DATAAREA",y="CLEAR_DAYA",v="CHECK_CHART"},UraS:function(e,t){e.exports={loading:"_2qlCpo31oA7m63zX0FCPV_"}},XFyo:function(e,t){},"Yq+E":function(e,t){e.exports={container:"_2vEaSEppDHCKse6wPryRHA"}},a4tX:function(e,t){},eqvY:function(e,t,a){"use strict";var n=a("Vp57"),r=a.n(n),i=a("3vYS"),s=a("i3dJ"),o=a("zYeL"),l=a("Yq+E"),c=a.n(l),p=a("Rj6T");t.a=function(e){e.match;return r.a.createElement("div",null,r.a.createElement("div",{className:c.a.container},r.a.createElement("div",{className:"left"},r.a.createElement("aside",{id:"aside",className:"aside"},r.a.createElement("div",{className:"logo"},"运营平台"),r.a.createElement("ul",{className:"menu",id:"asidemenu"}))),r.a.createElement("div",{className:"right"},r.a.createElement(p.a,null),r.a.createElement(i.c,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/hospital/:id",exact:!0,component:o.a}),r.a.createElement(i.b,{path:"/",component:s.a}))))))}},i3dJ:function(e,t,a){"use strict";var n=a("Vp57"),r=a.n(n);t.a=function(){return r.a.createElement("div",null,"没有对应的页面：404 ERROR!")}},naZi:function(e,t){},qca9:function(e,t){},tWyK:function(e,t,a){"use strict";var n=a("3cXf"),r=a.n(n),i=a("ZLEe"),s=a.n(i),o=a("Yarq"),l=a.n(o),c=a("AA3o"),p=a.n(c),d=a("xSur"),u=a.n(d),m=a("UzKs"),h=a.n(m),f=a("Y7Ml"),y=a.n(f),v=a("Vp57"),E=a.n(v),g=a("H9lX"),D=a.n(g),_=a("dLdd"),M=(a.n(_),a("4UBr")),I=a.n(M),k=a("kcZj"),A=a.n(k),b=a("jTsb"),S=a.n(b),T=a("tKH1"),N=a.n(T),C=a("pq2k"),x=a.n(C),O=a("8FaN"),F=a.n(O),R=a("aUFn"),w=a.n(R),U=a("bhly"),q=a.n(U),L=(F.a.Item,N.a.TextArea),Y=function(e){function t(){var e,a,n,r;p()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=h()(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,dataValue:""},r=a,h()(n,r)}return y()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.module;this.props.getModuleDetail({hosId:this.props.HospitalId,pageId:e.id}),this.props.getModuleData({hosId:this.props.HospitalId,page:e.id})}},{key:"componentWillReceiveProps",value:function(e){if(parseInt(this.props.module.id)!==parseInt(e.module.id)){console.log("更新module id");var t=e.module;this.props.getModuleDetail({hosId:this.props.HospitalId,pageId:t.id}),this.props.getModuleData({hosId:this.props.HospitalId,page:t.id})}}},{key:"onDataChange",value:function(e,t,a){var n=this;try{var r=JSON.parse(e);this.setState({error:!1},function(e){n.props.saveDataArea(r),n.props.templateModifyTrue()})}catch(e){this.setState({error:!0})}}},{key:"updateTextarea",value:function(e){var t=e.target.value;this.props.saveTextArea(t)}},{key:"syncTextArea",value:function(){var e=this;this.setState({loading:!0});var t=this.props.module;if(this.props.moduleDetail.txtData){this.props.syncTextArea({hosId:this.props.HospitalId,pageId:t.id,sections:this.props.moduleDetail.txtData}).then(function(t){t.payload?(e.setState({loading:!1}),e.props.templateModifyFalse(),q.a.success({message:"同步模块文字成功！"})):(e.setState({loading:!1}),q.a.error({message:"同步失败！",description:"服务当前不可用"}))})}}},{key:"syncDataArea",value:function(){var e=this;if(this.state.error)return q.a.error({message:"数据结构有误,请确认"}),!1;var t=this.props.module,a=this.props.moduleData.chartData,n=this.props.moduleOldData.chartData;if(this.state.formatError=!1,n instanceof Array){if(!a instanceof Array)return q.a.error({message:"数据格式应该是数组"}),!1;n.forEach(function(t,n){if(t.constructor===Object&&(console.log(s()(t).join()===s()(a[n]).join()),s()(t).join()!==s()(a[n]).join()))return e.state.formatError=!0,q.a.error({message:"新数据的key值与原数据key值不符"}),!1})}if(n.constructor===Object){if(a.constructor!==Object)return q.a.error({message:"数据格式应该是Object"}),!1;if(s()(n).join()!==s()(a).join())return this.state.formatError=!0,q.a.error({message:"新数据的key值与原数据key值不符"}),!1}if(this.state.formatError)return!1;this.setState({loading:!0});var i=r()(a);this.props.syncDataArea({hosId:this.props.HospitalId,page:t.id,chart:i}).then(function(t){if(t.payload){var a=e.props.module;e.setState({loading:!1}),e.props.templateModifyFalse(),q.a.success({message:"同步模块数据成功！"}),e.props.checkChart(),e.props.getModuleData({hosId:e.props.HospitalId,page:a.id})}else e.setState({loading:!1}),q.a.error({message:"同步失败！",description:"服务当前不可用"})})}},{key:"render",value:function(){var e=this.props.moduleDetail?this.props.moduleDetail.txtData:"这个模块还没有文本数据！",t=this.props.moduleDetail?this.props.moduleDetail.pageNum:"",a=this.props.moduleDetail?this.props.moduleDetail.chapterNum:"",n=this.props.moduleData?this.props.moduleData:{},i=n.chartData?r()(n.chartData,null,2):r()({}),s={disableLayerHinting:!0,disableMonospaceOptimizations:!0};return E.a.createElement("div",null,E.a.createElement(S.a,{message:"当前编辑的模块名是"+this.props.module.name+"，页码为"+t+",章节码为"+a,type:"info",showIcon:!0}),E.a.createElement(A.a,{mode:"horizontal",selectedKeys:["edit"]},E.a.createElement(A.a.Item,{key:"edit"},E.a.createElement(I.a,{type:"mail"}),"编辑模块"),E.a.createElement(A.a.Item,{key:"preview"},E.a.createElement("a",{href:"http://121.42.252.26:3000/"+this.props.HospitalId+"?template="+this.props.templateID+"&module="+parseInt(this.props.module.id),target:"_blank"},E.a.createElement(I.a,{type:"mail"}),"预览当前模块web版本"))),E.a.createElement("div",{className:D.a.edit_body},n.chartData?E.a.createElement("div",null,E.a.createElement("div",{className:D.a.text_title},"编辑模块数据"),E.a.createElement("div",{className:D.a.text_left},E.a.createElement(w.a,{width:"800",height:"400",language:"json",theme:"vs",options:s,onChange:this.onDataChange.bind(this),value:i})),E.a.createElement("div",{className:D.a.sync_circle},E.a.createElement(x.a,{type:"primary",icon:"sync",loading:this.state.loading,onClick:this.syncDataArea.bind(this)},"同步模块数据"))):null,E.a.createElement("div",{className:D.a.text_title},"编辑模块文字"),E.a.createElement(L,{placeholder:"正在加载文本信息...",value:e,rows:8,onChange:this.updateTextarea.bind(this)}),E.a.createElement("div",{className:D.a.sync_circle},E.a.createElement(x.a,{type:"primary",icon:"sync",onClick:this.syncTextArea.bind(this),loading:this.state.loading},"同步模块文字"))))}}]),t}(E.a.Component);t.a=Y},w0dx:function(e,t,a){"use strict";var n=a("Yarq"),r=a.n(n),i=a("AA3o"),s=a.n(i),o=a("xSur"),l=a.n(o),c=a("UzKs"),p=a.n(c),d=a("Y7Ml"),u=a.n(d),m=a("Vp57"),h=a.n(m),f=a("OtPS"),y=a.n(f),v=a("nPfA"),E=(a.n(v),a("H9lX")),g=a.n(E),D=a("R/7I"),_=a.n(D),M=a("4UBr"),I=a.n(M),k=a("pq2k"),A=a.n(k),b=a("bhly"),S=a.n(b),T=a("jTsb"),N=a.n(T),C=a("lQ53"),x=(a.n(C),a("RiOE")),O=(a.n(x),a("zNjO")),F=(a.n(O),a("FmU8")),R=(a.n(F),a("RMoS")),w=(a.n(R),a("q1Sz")),U=(a.n(w),a("4S3J")),q=(a.n(U),a("MYx0")),L=(a.n(q),a("4uc4")),Y=(a.n(L),a("M09i")),H=(a.n(Y),a("dLdd")),K=a.n(H),j=a("glqt"),P=(a.n(j),a("U2t0")),B=a("JaHG"),z=a("tWyK"),W=a("/cg+"),V=y.a.TabPane,G=function(e){function t(){var e,a,n,i;s()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(l))),n.state={activeKey:"",templateModify:!1,selectedModule:"",visiableAddNew:!1},n.tabClick=function(e){parseInt(e)!==parseInt(n.state.activeKey)&&(n.state.templateModify?_.a.confirm({title:"请确认",content:"当前配置已经修改，你要丢弃当前修改吗？",okText:"是的",cancelText:"取消",onOk:n.confirmSHIFT.bind(n,e)}):n.confirmSHIFT(e))},i=a,p()(n,i)}return u()(t,e),l()(t,[{key:"exchangeModulePosition",value:function(e,t,a){var n=K.a.find(this.props.templatesInfo.templates,{templateID:parseInt(e)});K.a.cloneDeep(n)}},{key:"templateModifyTrue",value:function(){this.setState({templateModify:!0})}},{key:"templateModifyFalse",value:function(){this.setState({templateModify:!1})}},{key:"confirmSHIFT",value:function(e){var t=K.a.find(this.props.templatesInfo,{templateID:parseInt(e)});t?(S.a.warning({message:"请注意！您即将配置"+t.templateName+"!"}),this.switchSure(e)):S.a.warning({message:"没有找到对应的模板,id为:"+e})}},{key:"switchSure",value:function(e){var t=this;parseInt(e)!==parseInt(this.state.activeKey)&&this.setState({activeKey:e,selectedModule:""},function(){t.templateModifyFalse()})}},{key:"showModal",value:function(){this.setState({visiableAddNew:!0})}},{key:"hideModal",value:function(){this.setState({visiableAddNew:!1})}},{key:"componentDidMount",value:function(){var e=this;this.props.GET_TEMPLATES({hosId:this.props.match.params.id}).then(function(){var t=parseInt(e.state.activeKey),n=0!==e.props.templatesInfo.length?e.props.templatesInfo[0].templateID:"",r="number"!=typeof t||isNaN(t)?parseInt(n):t;a.i(B.a)(n)&&e.setState({activeKey:r},function(){console.log("初始加载完毕的page为",r)}),e.checkChart()})}},{key:"curSelectModule",value:function(e){this.setState({selectedModule:e})}},{key:"exportPDF",value:function(){var e=this.state.activeKey,t=this.props.match.params.id;window.open("http://121.42.252.26:3001/"+t+"?template="+e,"_blank")}},{key:"previewWeb",value:function(){var e=this.state.activeKey,t=this.props.match.params.id;window.open("http://121.42.252.26:3000/"+t+"?template="+e,"_blank")}},{key:"clearDataOk",value:function(){var e=this;this.props.CLEAR_DAYA({hosId:this.props.match.params.id}).then(function(t){if(!t.payload)return S.a.error({message:"同步失败！",description:"服务当前不可用"}),!1;t.payload.data.success?(S.a.success({message:"清除数据成功"}),e.checkChart(),(e.state.selectedModule||{}).id&&e.props.GET_MODULE_DATA({hosId:e.props.match.params.id,page:e.state.selectedModule.id})):S.a.error({message:"同步失败！",description:"服务当前不可用"})})}},{key:"clearData",value:function(){_.a.confirm({title:"清除数据",content:"是否要清除当前医院所有修改的数据？清除后不可恢复",okText:"是的",cancelText:"取消",onOk:this.clearDataOk.bind(this)})}},{key:"checkChart",value:function(){this.props.CHECK_CHART({hosId:this.props.match.params.id})}},{key:"render",value:function(){var e=this.props.match.params.id,t=this.props.templatesInfo,a=0!==t.length,n=t,r=K.a.find(n,{templateID:parseInt(this.state.activeKey)});return h.a.createElement("div",null,h.a.createElement(N.a,{message:this.props.checkChart,type:"info",style:{marginTop:"20px"},showIcon:!0}),a&&h.a.createElement("div",{className:g.a.marginTop20},h.a.createElement("div",null,h.a.createElement(y.a,{onTabClick:this.tabClick.bind(this),activeKey:""+this.state.activeKey,size:"default",type:"card"},n&&n.map(function(e){return h.a.createElement(V,{tab:e.templateName,key:e.templateID})})))),h.a.createElement("div",{className:g.a.tab_content},h.a.createElement("div",{className:"modules_list"},h.a.createElement("div",null,r&&h.a.createElement(P.a,{sync:this.props.SYNC_MODULES_IN_TEMPLATES,templateID:this.state.activeKey,HospitalId:e,templateName:r.templateName,exchangeModulePosition:this.exchangeModulePosition,curModules:r.modules,templateModifyTrue:this.templateModifyTrue.bind(this),templateModifyFalse:this.templateModifyFalse.bind(this),templateModify:this.state.templateModify,selectedModule:this.curSelectModule.bind(this),reFetchData:this.componentDidMount.bind(this)}))),h.a.createElement("div",{className:"modules_content"},a&&!this.state.selectedModule&&h.a.createElement("div",{className:g.a.edit,style:{marginTop:100,marginBottom:100}},h.a.createElement(I.a,{type:"edit",style:{fontSize:100,color:"#e2e2e2"}}),h.a.createElement("div",null,"点击左侧模块，进行编辑操作")),this.state.selectedModule&&h.a.createElement(z.a,{module:this.state.selectedModule,templateID:this.state.activeKey,moduleDetail:this.props.moduleDetail,moduleData:this.props.moduleData,moduleOldData:this.props.moduleOldData,getModuleDetail:this.props.GET_MODULE_DETAIL,getModuleData:this.props.GET_MODULE_DATA,saveTextArea:this.props.SAVE_TEXTAREA,saveDataArea:this.props.SAVE_DATAAREA,syncTextArea:this.props.SYNC_TEXTAREA,syncDataArea:this.props.SYNC_DATAAREA,templateModifyTrue:this.templateModifyTrue.bind(this),templateModifyFalse:this.templateModifyFalse.bind(this),HospitalId:e,checkChart:this.checkChart.bind(this)}))),h.a.createElement("div",{className:g.a.actions},h.a.createElement(A.a,{type:"primary",icon:"file",onClick:this.clearData.bind(this)}," 清除改动数据 "),!isNaN(parseInt(this.state.activeKey))&&h.a.createElement(A.a,{type:"primary",icon:"file",onClick:this.exportPDF.bind(this)}," 导出PDF "),!isNaN(parseInt(this.state.activeKey))&&h.a.createElement(A.a,{type:"primary",icon:"file",onClick:this.previewWeb.bind(this)}," 预览网页 "),h.a.createElement(A.a,{type:"primary",icon:"plus",onClick:this.showModal.bind(this)}," 新增模块 "),h.a.createElement(W.a,{visiableAddNew:this.state.visiableAddNew,hideModal:this.hideModal.bind(this),addNewModule:this.props.ADD_NEW_MODULE})))}}]),t}(h.a.Component);t.a=G},zYeL:function(e,t,a){"use strict";var n=a("Vp57"),r=(a.n(n),a("BCOr")),i=a("6qjO"),s=a("w0dx"),o=function(e){return e.templates},l=r.a,c=a.i(i.b)(o,l)(s.a);t.a=c}},["NHnr"]);