<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>用户登录</title>
        <link href="../css/user-login.css" type="text/css" rel="stylesheet"/>
    </head>
<body>

<div class="banner">
    <p>数联医信  <span>运营平台</span></p>
</div>

<div class="login-box">
    <div class="head">欢迎登录</div>
    <div class="user-input clear">
        <i class="left i-n"></i>
        <input class="left" placeholder="用户名" id="userName"/>
    </div>
    <div class="user-input clear">
        <i class="left i-p"></i>
        <input class="left" placeholder="密码" type="password" id="password" onkeydown="EnterPress()"/>
    </div>
    <a class="login-btn" href="javascript:;" onclick="Login()">登录</a>
    <div class="forget clear">
        <!--<label class="left"><input type="checkbox"/>记住密码</label>-->
        <!--<a class="right" href="#">忘记密码？</a>-->
    </div>
</div>
<script src="../js/jquery.min.js"></script>
<script src="../js/jquery.cookie.js"></script>


<script src="../js/user-tree.js"></script>

<script type="text/javascript">

     var _ip = 'http://121.42.187.170';
//    var _ip = 'http://192.168.6.23:8080';
//var _ip = 'http://10.0.1.156:8080';
    function Login() {
        $('.error-msg').remove();
        var url = _ip + '/login';
        var data = {
            userName: $('#userName').val(),
            password: $('#password').val()
        };
        organizeAjaxPost(url, data, function(json) {

            if (json.success) {
                $.cookie('userid',json.data.id);
                $.cookie('userrole',json.data.role);
                window.location.href = 'user-manage.html';
            }
            else {
                $('.head').after('<p class="error-msg">'+ json.message +'</p>');
            }
        });
    }
     function EnterPress(e){ //传入 event
         var e = e || window.event;
         if(e.keyCode == 13){
             Login()
         }
     }
</script>
</body>
</html>